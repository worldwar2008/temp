val_scores [ 0.02126826 -0.02354689  0.06698611]
val_scores_mean 0.0215691586529
test_score:  0.5398083886
mape_socre:  3.20884563932
test_score:  0.563738948854
mape_socre:  3.48072026566
Traceback (most recent call last):
  File "train_gg_atw.py", line 77, in <module>
    val_scores = cross_val_score(rfr, train_data, train_target_data, cv=3, n_jobs=3)
NameError: name 'rfr' is not defined
val_scores [-0.04235419 -0.06636311  0.03194086]
val_scores_mean -0.025592146992
Traceback (most recent call last):
  File "train_gg_atw.py", line 109, in <module>
    test_score = clf.score(test_data, test_target_data)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/base.py", line 347, in score
    return r2_score(y, self.predict(X), sample_weight=sample_weight,
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/ensemble/forest.py", line 649, in predict
    X = self._validate_X_predict(X)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/ensemble/forest.py", line 316, in _validate_X_predict
    raise NotFittedError("Estimator not fitted, "
sklearn.utils.validation.NotFittedError: Estimator not fitted, call `fit` before exploiting the model.
Traceback (most recent call last):
  File "train_gg_atw.py", line 72, in <module>
    clf = rfr.fit(train_data, train_target_data)
NameError: name 'rfr' is not defined
val_scores [-5.20519217 -2.94887063 -3.10529262 -2.7520221  -2.18546638 -1.71672713
 -2.07548152 -2.34562933 -7.36932896 -1.86493518]
val_scores_mean -3.15689460209
test_score:  0.461191351491
mape_socre:  1.29907758057
good_df.shape (2838, 10)
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   0.727138  
1   13.666667      2.0          2.0  51.0     0  -0.179736  
2    2.666667      2.0          2.0  51.0     0   1.662321  
3   30.000000      2.0          2.0  51.0     0   7.877152  
4    2.000000      2.0          2.0  51.0     0  -1.726692  
5   27.000000      2.0          2.0  51.0     0  14.140206  
6   45.333333      2.0          2.0  51.0     0   2.184713  
7   96.666667      2.0          2.0  51.0     0  -1.757345  
8   27.666667      2.0          2.0  51.0     0   5.855083  
9    0.666667      2.0          2.0  51.0     0  17.469701  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663991207
mape_socre:  0.0233039278237
district_id= 2
test_score:  0.993073558464
mape_socre:  0.0418953241745
district_id= 3
test_score:  0.998299205408
mape_socre:  0.0224166300647
district_id= 4
test_score:  0.998893803364
mape_socre:  0.0432902960348
district_id= 5
test_score:  0.998357965773
mape_socre:  0.0287388163277
district_id= 6
test_score:  0.999910571715
mape_socre:  0.0361871722877
district_id= 7
test_score:  0.982511214944
mape_socre:  0.0134415272611
district_id= 8
test_score:  0.995374274361
mape_socre:  0.0173961461375
district_id= 9
test_score:  0.996253147478
mape_socre:  0.0378348043345
district_id= 10
test_score:  0.998467326534
mape_socre:  0.0398762957652
district_id= 11
test_score:  0.998187539505
mape_socre:  0.0411865723556
district_id= 12
test_score:  0.996709348018
mape_socre:  0.0506588037716
district_id= 13
test_score:  0.995679645423
mape_socre:  0.0241886399541
district_id= 14
test_score:  0.999251373766
mape_socre:  0.0707171785742
district_id= 15
test_score:  0.998007659232
mape_socre:  0.0503179020013
district_id= 16
test_score:  0.999462935895
mape_socre:  0.0407120494756
district_id= 17
test_score:  0.998574281153
mape_socre:  0.0143088076927
district_id= 18
test_score:  0.995364455332
mape_socre:  0.053387050921
district_id= 19
test_score:  0.999159323236
mape_socre:  0.047136094391
district_id= 20
test_score:  0.992599175691
mape_socre:  0.0199245849178
district_id= 21
test_score:  0.998849940995
mape_socre:  0.0517106836114
district_id= 22
test_score:  0.992598306603
mape_socre:  0.00738194972026
district_id= 23
test_score:  0.995805680361
mape_socre:  0.0170904314841
district_id= 24
test_score:  0.999881126355
mape_socre:  0.0412986564994
district_id= 25
test_score:  0.994850316216
mape_socre:  0.056610999037
district_id= 26
test_score:  0.952317832615
mape_socre:  0.0430514637846
district_id= 27
test_score:  0.997582380548
mape_socre:  0.0213634688698
district_id= 28
test_score:  0.998249155793
mape_socre:  0.013319463694
district_id= 29
test_score:  0.996568901458
mape_socre:  0.042218610657
district_id= 30
test_score:  0.992420082679
mape_socre:  0.0302489516889
district_id= 31
test_score:  0.996835215698
mape_socre:  0.047589392361
district_id= 32
test_score:  0.98396388045
mape_socre:  0.0572142893711
district_id= 33
test_score:  0.997247511493
mape_socre:  0.0390449297578
district_id= 34
test_score:  0.998727290503
mape_socre:  0.0424395291841
district_id= 35
test_score:  0.97371344642
mape_socre:  0.0281650278157
district_id= 36
test_score:  0.998891615401
mape_socre:  0.0365996819605
district_id= 37
test_score:  0.996919985435
mape_socre:  0.0144890751451
district_id= 38
test_score:  0.999642871812
mape_socre:  0.0519265435796
district_id= 39
test_score:  0.997719852955
mape_socre:  0.0234193546737
district_id= 40
test_score:  0.994890978563
mape_socre:  0.0633292945989
district_id= 41
test_score:  0.998572259257
mape_socre:  0.0488876666662
district_id= 42
test_score:  0.987012766197
mape_socre:  0.0545273183564
district_id= 43
test_score:  0.997014676237
mape_socre:  0.0488978897288
district_id= 44
test_score:  0.999065622898
mape_socre:  0.0236978438021
district_id= 45
test_score:  0.997990485847
mape_socre:  0.0441637811524
district_id= 46
test_score:  0.999422005243
mape_socre:  0.0210270481943
district_id= 47
test_score:  0.999769454996
mape_socre:  0.0147285176871
district_id= 48
test_score:  0.996509276693
mape_socre:  0.0128229002022
district_id= 49
test_score:  0.997542411267
mape_socre:  0.041523963208
district_id= 50
test_score:  0.994034877995
mape_socre:  0.0348908362706
district_id= 51
test_score:  0.995632600319
mape_socre:  0.00986722125579
district_id= 52
test_score:  0.999941274396
mape_socre:  0.0109060373651
district_id= 53
test_score:  0.998365063565
mape_socre:  0.0785078665017
district_id= 54
test_score:  0.878150768269
mape_socre:  0.513786616501
district_id= 55
test_score:  0.981788934397
mape_socre:  0.0333090244886
district_id= 56
test_score:  0.989295160769
mape_socre:  0.0557620681091
district_id= 57
test_score:  0.970967651279
mape_socre:  0.0511995461821
district_id= 58
test_score:  0.995595447709
mape_socre:  0.0370436600609
district_id= 59
test_score:  0.998902625527
mape_socre:  0.0263397737256
district_id= 60
test_score:  0.98727992397
mape_socre:  0.0360477167723
district_id= 61
test_score:  0.998301951361
mape_socre:  0.0140760789957
district_id= 62
test_score:  0.997827292192
mape_socre:  0.0124176417068
district_id= 63
test_score:  0.999999895266
mape_socre:  0.00164919877831
district_id= 64
test_score:  0.996376439558
mape_socre:  0.0209649360129
district_id= 65
test_score:  0.99048988193
mape_socre:  0.0384656678665
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0          1.0  2016-01-22-46  1461.000000  259.000000  102.000000   
1          2.0  2016-01-22-46   651.666667   78.000000   20.000000   
2          3.0  2016-01-22-46   188.333333   26.333333    5.333333   
3          4.0  2016-01-22-46   652.000000  127.333333   33.666667   
4          5.0  2016-01-22-46    97.000000   10.666667    3.000000   
5          6.0  2016-01-22-46   321.000000   58.666667   26.333333   
6          7.0  2016-01-22-46  1763.333333  247.333333   70.000000   
7          8.0  2016-01-22-46  2638.666667  316.000000  114.000000   
8          9.0  2016-01-22-46   504.666667   68.333333   19.000000   
9         10.0  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0   0.0   3.925380  
1   13.666667      2.0          2.0  51.0   0.0   4.707834  
2    2.666667      2.0          2.0  51.0   0.0   3.913995  
3   30.000000      2.0          2.0  51.0   0.0  10.942463  
4    2.000000      2.0          2.0  51.0   0.0   4.608844  
5   27.000000      2.0          2.0  51.0   0.0   4.775993  
6   45.333333      2.0          2.0  51.0   0.0   5.908247  
7   96.666667      2.0          2.0  51.0   0.0   3.813914  
8   27.666667      2.0          2.0  51.0   0.0   5.744204  
9    0.666667      2.0          2.0  51.0   0.0   4.682492  
final_result.shape (2837, 11)
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663991195
mape_socre:  0.023312321622
district_id= 2
test_score:  0.993073557839
mape_socre:  0.0419137745406
district_id= 3
test_score:  0.998299205317
mape_socre:  0.0224202510452
district_id= 4
test_score:  0.998893803364
mape_socre:  0.0432955110983
district_id= 5
test_score:  0.998357965731
mape_socre:  0.0287458718737
district_id= 6
test_score:  0.999910571712
mape_socre:  0.0361863317215
district_id= 7
test_score:  0.982511214944
mape_socre:  0.0134391541594
district_id= 8
test_score:  0.995374274361
mape_socre:  0.0173958355572
district_id= 9
test_score:  0.996253147572
mape_socre:  0.0378002526343
district_id= 10
test_score:  0.998467326548
mape_socre:  0.0398646427492
district_id= 11
test_score:  0.998187539408
mape_socre:  0.0411998135393
district_id= 12
test_score:  0.996709348077
mape_socre:  0.0506415345473
district_id= 13
test_score:  0.995679645254
mape_socre:  0.0241929612582
district_id= 14
test_score:  0.999251373765
mape_socre:  0.0707216156099
district_id= 15
test_score:  0.998007659391
mape_socre:  0.0502983353363
district_id= 16
test_score:  0.999462935915
mape_socre:  0.0407018224392
district_id= 17
test_score:  0.998574280487
mape_socre:  0.0143188888516
district_id= 18
test_score:  0.995364455413
mape_socre:  0.0533852597219
district_id= 19
test_score:  0.999159323261
mape_socre:  0.0471178297562
district_id= 20
test_score:  0.992599175691
mape_socre:  0.019926471866
district_id= 21
test_score:  0.998849940983
mape_socre:  0.0517181181254
district_id= 22
test_score:  0.99259830661
mape_socre:  0.00737677763415
district_id= 23
test_score:  0.995805680361
mape_socre:  0.0170889929107
district_id= 24
test_score:  0.999881126354
mape_socre:  0.0413061195287
district_id= 25
test_score:  0.994850316234
mape_socre:  0.0565977525463
district_id= 26
test_score:  0.952317832615
mape_socre:  0.0430475527675
district_id= 27
test_score:  0.99758238049
mape_socre:  0.0213718879546
district_id= 28
test_score:  0.998249155793
mape_socre:  0.013322401507
district_id= 29
test_score:  0.996568901499
mape_socre:  0.04219635529
district_id= 30
test_score:  0.992420082236
mape_socre:  0.0302808991677
district_id= 31
test_score:  0.996835215732
mape_socre:  0.047585661233
district_id= 32
test_score:  0.983963880629
mape_socre:  0.0572099475297
district_id= 33
test_score:  0.997247511744
mape_socre:  0.0390195132233
district_id= 34
test_score:  0.998727290532
mape_socre:  0.0424372103835
district_id= 35
test_score:  0.9737134464
mape_socre:  0.0281731254306
district_id= 36
test_score:  0.998891615394
mape_socre:  0.0366033761654
district_id= 37
test_score:  0.996919985434
mape_socre:  0.0144871011884
district_id= 38
test_score:  0.999642871753
mape_socre:  0.051944019202
district_id= 39
test_score:  0.99771985298
mape_socre:  0.0234043646072
district_id= 40
test_score:  0.994890978574
mape_socre:  0.0633288579193
district_id= 41
test_score:  0.998572259237
mape_socre:  0.0489015357045
district_id= 42
test_score:  0.987012766201
mape_socre:  0.054522995168
district_id= 43
test_score:  0.997014676237
mape_socre:  0.0488978897288
district_id= 44
test_score:  0.99906562265
mape_socre:  0.0237251700001
district_id= 45
test_score:  0.997990485992
mape_socre:  0.0441409603903
district_id= 46
test_score:  0.999422005243
mape_socre:  0.0210297592732
district_id= 47
test_score:  0.999769455315
mape_socre:  0.0146916144458
district_id= 48
test_score:  0.996509276693
mape_socre:  0.0128184788333
district_id= 49
test_score:  0.997542411205
mape_socre:  0.0415280568165
district_id= 50
test_score:  0.994034877949
mape_socre:  0.0348951760804
district_id= 51
test_score:  0.995632600319
mape_socre:  0.00986754599041
district_id= 52
test_score:  0.999941274414
mape_socre:  0.0108916622779
district_id= 53
test_score:  0.998365063561
mape_socre:  0.0785123349236
district_id= 54
test_score:  0.878150769056
mape_socre:  0.513758197133
district_id= 55
test_score:  0.981788935158
mape_socre:  0.0333005068687
district_id= 56
test_score:  0.989295160789
mape_socre:  0.0557590602237
district_id= 57
test_score:  0.970967650056
mape_socre:  0.0512403029332
district_id= 58
test_score:  0.995595447636
mape_socre:  0.037039427642
district_id= 59
test_score:  0.998902625348
mape_socre:  0.0263572690851
district_id= 60
test_score:  0.987279923948
mape_socre:  0.036049599537
district_id= 61
test_score:  0.998301949528
mape_socre:  0.0141162429311
district_id= 62
test_score:  0.997827292933
mape_socre:  0.0123993837948
district_id= 63
test_score:  0.999999895591
mape_socre:  0.00164760579798
district_id= 64
test_score:  0.996376440665
mape_socre:  0.0209343681682
district_id= 65
test_score:  0.990489882251
mape_socre:  0.0384470109905
district_id= 66
test_score:  0.981843670277
mape_socre:  0.0329103884491
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week       gap  
0   67.333333      2.0          2.0  51.0     0  4.161013  
1   13.666667      2.0          2.0  51.0     0  3.341315  
2    2.666667      2.0          2.0  51.0     0  4.490282  
3   30.000000      2.0          2.0  51.0     0  9.380109  
4    2.000000      2.0          2.0  51.0     0  3.361811  
5   27.000000      2.0          2.0  51.0     0  3.677603  
6   45.333333      2.0          2.0  51.0     0  5.715727  
7   96.666667      2.0          2.0  51.0     0  4.363859  
8   27.666667      2.0          2.0  51.0     0  4.918984  
9    0.666667      2.0          2.0  51.0     0  3.774668  
final_result.shape (2838, 11)
Traceback (most recent call last):
  File "TrainDivide.py", line 2, in <module>
    import pandas as pd
  File "/usr/lib64/python2.6/site-packages/pandas/__init__.py", line 22, in <module>
    from pandas.compat.numpy_compat import *
  File "/usr/lib64/python2.6/site-packages/pandas/compat/__init__.py", line 298, in <module>
    from collections import OrderedDict, Counter
ImportError: cannot import name Counter
Traceback (most recent call last):
  File "TrainDivide.py", line 2, in <module>
    import pandas as pd
  File "/usr/lib64/python2.6/site-packages/pandas/__init__.py", line 22, in <module>
    from pandas.compat.numpy_compat import *
  File "/usr/lib64/python2.6/site-packages/pandas/compat/__init__.py", line 298, in <module>
    from collections import OrderedDict, Counter
ImportError: cannot import name Counter
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663991257
mape_socre:  0.0232138368965
district_id= 2
test_score:  0.993073564186
mape_socre:  0.0415774081609
district_id= 3
Traceback (most recent call last):
  File "TrainDivide.py", line 203, in <module>
    td.submission_process()
  File "TrainDivide.py", line 190, in submission_process
    clf = self.train_process(train_data, train_target_data, test_data, test_target_data)
  File "TrainDivide.py", line 133, in train_process
    clf = self.est.fit(train_data, train_target_data)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/ensemble/gradient_boosting.py", line 1025, in fit
    begin_at_stage, monitor, X_idx_sorted)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/ensemble/gradient_boosting.py", line 1080, in _fit_stages
    X_csc, X_csr)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/ensemble/gradient_boosting.py", line 784, in _fit_stage
    check_input=False, X_idx_sorted=X_idx_sorted)
  File "/root/.pyenv/versions/anaconda-4.0.0/lib/python2.7/site-packages/sklearn/tree/tree.py", line 350, in fit
    builder.build(self.tree_, X, y, sample_weight, X_idx_sorted)
KeyboardInterrupt
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663991261
mape_socre:  0.0231829909248
district_id= 2
test_score:  0.993073564445
mape_socre:  0.0415002175331
district_id= 3
test_score:  0.998299208451
mape_socre:  0.0221158015516
district_id= 4
test_score:  0.998893803375
mape_socre:  0.0432016400802
district_id= 5
test_score:  0.998357966365
mape_socre:  0.0286001878035
district_id= 6
test_score:  0.999910571757
mape_socre:  0.0360616542599
district_id= 7
test_score:  0.982511214945
mape_socre:  0.0134157614268
district_id= 8
test_score:  0.995374274361
mape_socre:  0.0173612248498
district_id= 9
test_score:  0.996253147807
mape_socre:  0.0376150280513
district_id= 10
test_score:  0.998467327129
mape_socre:  0.0396839144324
district_id= 11
test_score:  0.998187540442
mape_socre:  0.0409427407924
district_id= 12
test_score:  0.996709348277
mape_socre:  0.0505240784175
district_id= 13
test_score:  0.995679648389
mape_socre:  0.023868257503
district_id= 14
test_score:  0.999251373769
mape_socre:  0.0706415042118
district_id= 15
test_score:  0.998007659713
mape_socre:  0.0501967857179
district_id= 16
test_score:  0.999462936401
mape_socre:  0.0404618793734
district_id= 17
test_score:  0.998574287492
mape_socre:  0.0139327479557
district_id= 18
test_score:  0.995364455959
mape_socre:  0.0532478808923
district_id= 19
test_score:  0.999159323369
mape_socre:  0.0469506043843
district_id= 20
test_score:  0.992599175698
mape_socre:  0.0197634661431
district_id= 21
test_score:  0.99884994112
mape_socre:  0.0515065088487
district_id= 22
test_score:  0.992598306754
mape_socre:  0.00730966188422
district_id= 23
test_score:  0.995805680362
mape_socre:  0.0170758625784
district_id= 24
test_score:  0.999881126362
mape_socre:  0.0411623359099
district_id= 25
test_score:  0.994850316648
mape_socre:  0.0562591582615
district_id= 26
test_score:  0.952317832626
mape_socre:  0.0429311564182
district_id= 27
test_score:  0.99758238069
mape_socre:  0.0213177728094
district_id= 28
test_score:  0.998249155795
mape_socre:  0.0132393101296
district_id= 29
test_score:  0.996568901791
mape_socre:  0.0419740834927
district_id= 30
test_score:  0.992420084083
mape_socre:  0.0300600281246
district_id= 31
test_score:  0.996835216052
mape_socre:  0.0474868372154
district_id= 32
test_score:  0.983963882478
mape_socre:  0.0569788196707
district_id= 33
test_score:  0.997247512648
mape_socre:  0.0388480716954
district_id= 34
test_score:  0.998727291146
mape_socre:  0.0422411426343
district_id= 35
test_score:  0.973713446535
mape_socre:  0.0280451335415
district_id= 36
test_score:  0.998891615987
mape_socre:  0.0363560576829
district_id= 37
test_score:  0.996919985436
mape_socre:  0.0144107011733
district_id= 38
test_score:  0.999642872052
mape_socre:  0.0517146004609
district_id= 39
test_score:  0.997719853119
mape_socre:  0.0232352912542
district_id= 40
test_score:  0.994890978683
mape_socre:  0.0632674013787
district_id= 41
test_score:  0.998572259489
mape_socre:  0.0487522656165
district_id= 42
test_score:  0.987012766245
mape_socre:  0.0544006987519
district_id= 43
test_score:  0.997014676561
mape_socre:  0.0487607855374
district_id= 44
test_score:  0.999065623481
mape_socre:  0.0235453214262
district_id= 45
test_score:  0.997990487024
mape_socre:  0.0438739605747
district_id= 46
test_score:  0.999422005244
mape_socre:  0.0209514174499
district_id= 47
test_score:  0.999769456224
mape_socre:  0.0144060555146
district_id= 48
test_score:  0.996509276696
mape_socre:  0.0127879027706
district_id= 49
test_score:  0.997542411741
mape_socre:  0.0413950596106
district_id= 50
test_score:  0.994034878705
mape_socre:  0.034752082221
district_id= 51
test_score:  0.995632600319
mape_socre:  0.00985902466268
district_id= 52
test_score:  0.999941274784
mape_socre:  0.0104084888107
district_id= 53
test_score:  0.998365063632
mape_socre:  0.0783815300385
district_id= 54
test_score:  0.878150775205
mape_socre:  0.513369661173
district_id= 55
test_score:  0.981788943326
mape_socre:  0.0329501893891
district_id= 56
test_score:  0.989295161133
mape_socre:  0.0556501788744
district_id= 57
test_score:  0.970967654148
mape_socre:  0.0509577760746
district_id= 58
test_score:  0.995595450794
mape_socre:  0.0367147074556
district_id= 59
test_score:  0.998902626487
mape_socre:  0.026096497389
district_id= 60
test_score:  0.987279928748
mape_socre:  0.0357186541692
district_id= 61
test_score:  0.998301958851
mape_socre:  0.0136354413773
district_id= 62
test_score:  0.997827297748
mape_socre:  0.0121057731597
district_id= 63
test_score:  0.999999897087
mape_socre:  0.00162316342678
district_id= 64
test_score:  0.996376445819
mape_socre:  0.0206254318854
district_id= 65
test_score:  0.990489885213
mape_socre:  0.038220794324
district_id= 66
test_score:  0.981843687689
mape_socre:  0.0323731242939
mape mean: 0.0416818831431
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   4.120251  
1   13.666667      2.0          2.0  51.0     0   5.869300  
2    2.666667      2.0          2.0  51.0     0   4.013344  
3   30.000000      2.0          2.0  51.0     0  10.377401  
4    2.000000      2.0          2.0  51.0     0   5.867378  
5   27.000000      2.0          2.0  51.0     0   6.247996  
6   45.333333      2.0          2.0  51.0     0   6.050413  
7   96.666667      2.0          2.0  51.0     0   3.818421  
8   27.666667      2.0          2.0  51.0     0   5.225962  
9    0.666667      2.0          2.0  51.0     0   7.107147  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663991261
mape_socre:  0.187012825574
district_id= 2
test_score:  0.993073564445
mape_socre:  0.388889658095
district_id= 3
test_score:  0.998299208451
mape_socre:  0.208018016561
district_id= 4
test_score:  0.998893803375
mape_socre:  0.331358960286
district_id= 5
test_score:  0.998357966365
mape_socre:  0.26996420825
district_id= 6
test_score:  0.999910571757
mape_socre:  0.332972939591
district_id= 7
test_score:  0.982511214945
mape_socre:  0.0136031722358
district_id= 8
test_score:  0.995374274361
mape_socre:  0.0174473448109
district_id= 9
test_score:  0.996253147807
mape_socre:  0.300150550941
district_id= 10
test_score:  0.998467327129
mape_socre:  0.372869693117
district_id= 11
test_score:  0.998187540442
mape_socre:  0.38287260849
district_id= 12
test_score:  0.996709348277
mape_socre:  0.418160055639
district_id= 13
test_score:  0.995679648389
mape_socre:  0.210843435304
district_id= 14
test_score:  0.999251373769
mape_socre:  0.594086771918
district_id= 15
test_score:  0.998007659713
mape_socre:  0.464685423666
district_id= 16
test_score:  0.999462936401
mape_socre:  0.379283516119
district_id= 17
test_score:  0.998574287492
mape_socre:  0.126607410757
district_id= 18
test_score:  0.995364455959
mape_socre:  0.494170867772
district_id= 19
test_score:  0.999159323369
mape_socre:  0.40639853549
district_id= 20
test_score:  0.992599175698
mape_socre:  0.0659430572042
district_id= 21
test_score:  0.99884994112
mape_socre:  0.449522782588
district_id= 22
test_score:  0.992598306754
mape_socre:  0.00756934880654
district_id= 23
test_score:  0.995805680362
mape_socre:  0.0172138411539
district_id= 24
test_score:  0.999881126362
mape_socre:  0.325232583884
district_id= 25
test_score:  0.994850316648
mape_socre:  0.501551347289
district_id= 26
test_score:  0.952317832626
mape_socre:  0.208307802598
district_id= 27
test_score:  0.99758238069
mape_socre:  0.155695178322
district_id= 28
test_score:  0.998249155795
mape_socre:  0.0134459668421
district_id= 29
test_score:  0.996568901791
mape_socre:  0.358810299118
district_id= 30
test_score:  0.992420084083
mape_socre:  0.277355982804
district_id= 31
test_score:  0.996835216052
mape_socre:  0.436545645178
district_id= 32
test_score:  0.983963882478
mape_socre:  0.530272263534
district_id= 33
test_score:  0.997247512648
mape_socre:  0.359375339325
district_id= 34
test_score:  0.998727291146
mape_socre:  0.388512018079
district_id= 35
test_score:  0.973713446535
mape_socre:  0.189129223758
district_id= 36
test_score:  0.998891615987
mape_socre:  0.341286919327
district_id= 37
test_score:  0.996919985436
mape_socre:  0.0148106883992
district_id= 38
test_score:  0.999642872052
mape_socre:  0.486103456368
district_id= 39
test_score:  0.997719853119
mape_socre:  0.164643824475
district_id= 40
test_score:  0.994890978683
mape_socre:  0.598550857608
district_id= 41
test_score:  0.998572259489
mape_socre:  0.452479212689
district_id= 42
test_score:  0.987012766245
mape_socre:  0.4321663179
district_id= 43
test_score:  0.997014676561
mape_socre:  0.460777710715
district_id= 44
test_score:  0.999065623481
mape_socre:  0.217965459793
district_id= 45
test_score:  0.997990487024
mape_socre:  0.415957157375
district_id= 46
test_score:  0.999422005244
mape_socre:  0.125747193575
district_id= 47
test_score:  0.999769456224
mape_socre:  0.128095464255
district_id= 48
test_score:  0.996509276696
mape_socre:  0.0129080598233
district_id= 49
test_score:  0.997542411741
mape_socre:  0.391759707827
district_id= 50
test_score:  0.994034878705
mape_socre:  0.307811225455
district_id= 51
test_score:  0.995632600319
mape_socre:  0.00987201055423
district_id= 52
test_score:  0.999941274785
mape_socre:  0.0986133562204
district_id= 53
test_score:  0.998365063632
mape_socre:  0.734587390264
district_id= 54
test_score:  0.878150775205
mape_socre:  4.87875069487
district_id= 55
test_score:  0.981788943327
mape_socre:  0.316379736619
district_id= 56
test_score:  0.989295161133
mape_socre:  0.508143762567
district_id= 57
test_score:  0.970967654148
mape_socre:  0.485746446524
district_id= 58
test_score:  0.995595450794
mape_socre:  0.349883540117
district_id= 59
test_score:  0.998902626487
mape_socre:  0.245001012719
district_id= 60
test_score:  0.987279928749
mape_socre:  0.348273690941
district_id= 61
test_score:  0.998301958852
mape_socre:  0.127991951811
district_id= 62
test_score:  0.997827297761
mape_socre:  0.116092688356
district_id= 63
test_score:  0.999999895293
mape_socre:  0.0162299663773
district_id= 64
test_score:  0.996376445819
mape_socre:  0.18862420184
district_id= 65
test_score:  0.990489885213
mape_socre:  0.364125457201
district_id= 66
test_score:  0.98184368769
mape_socre:  0.311566170367
mape mean: 0.361133697091
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   4.648979  
1   13.666667      2.0          2.0  51.0     0   2.913258  
2    2.666667      2.0          2.0  51.0     0   4.449940  
3   30.000000      2.0          2.0  51.0     0  10.115336  
4    2.000000      2.0          2.0  51.0     0   2.891012  
5   27.000000      2.0          2.0  51.0     0   3.064106  
6   45.333333      2.0          2.0  51.0     0   6.582743  
7   96.666667      2.0          2.0  51.0     0   4.723286  
8   27.666667      2.0          2.0  51.0     0   5.335619  
9    0.666667      2.0          2.0  51.0     0   3.588289  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
test_score:  0.999663990948
mape_socre:  0.189318913904
district_id= 2
test_score:  0.993073533307
mape_socre:  0.397965589407
district_id= 3
test_score:  0.998299194434
mape_socre:  0.21447618246
district_id= 4
test_score:  0.998893803282
mape_socre:  0.333868310321
district_id= 5
test_score:  0.998357961217
mape_socre:  0.274425018668
district_id= 6
test_score:  0.999910571527
mape_socre:  0.336039726878
district_id= 7
test_score:  0.982511214937
mape_socre:  0.0140206995204
district_id= 8
test_score:  0.995374274357
mape_socre:  0.0181788035967
district_id= 9
test_score:  0.996253146605
mape_socre:  0.304371001467
district_id= 10
test_score:  0.998467323682
mape_socre:  0.37737987096
district_id= 11
test_score:  0.998187533466
mape_socre:  0.389840380174
district_id= 12
test_score:  0.996709346758
mape_socre:  0.420989235417
district_id= 13
test_score:  0.995679633604
mape_socre:  0.217936293862
district_id= 14
test_score:  0.999251373746
mape_socre:  0.596011378605
district_id= 15
test_score:  0.998007657173
mape_socre:  0.467946040773
district_id= 16
test_score:  0.999462933826
mape_socre:  0.385138351338
district_id= 17
test_score:  0.998574256381
mape_socre:  0.134767267442
district_id= 18
test_score:  0.995364449997
mape_socre:  0.498681379787
district_id= 19
test_score:  0.999159322489
mape_socre:  0.41108093036
district_id= 20
test_score:  0.992599175659
mape_socre:  0.0695019503728
district_id= 21
test_score:  0.998849940375
mape_socre:  0.454199142113
district_id= 22
test_score:  0.992598306114
mape_socre:  0.00881801667199
district_id= 23
test_score:  0.995805680354
mape_socre:  0.017413744568
district_id= 24
test_score:  0.999881126336
mape_socre:  0.327736744107
district_id= 25
test_score:  0.994850314922
mape_socre:  0.508612962438
district_id= 26
test_score:  0.952317832568
mape_socre:  0.210824260181
district_id= 27
test_score:  0.997582379706
mape_socre:  0.156782666328
district_id= 28
test_score:  0.998249155787
mape_socre:  0.0148700171369
district_id= 29
test_score:  0.99656890052
mape_socre:  0.36353420729
district_id= 30
test_score:  0.992420071362
mape_socre:  0.283019096881
district_id= 31
test_score:  0.996835211969
mape_socre:  0.440148900086
district_id= 32
test_score:  0.983963866633
mape_socre:  0.537107272123
district_id= 33
test_score:  0.997247504027
mape_socre:  0.364637383403
district_id= 34
test_score:  0.998727286729
mape_socre:  0.393716787932
district_id= 35
test_score:  0.97371344528
mape_socre:  0.193010163378
district_id= 36
test_score:  0.998891611802
mape_socre:  0.347798472625
district_id= 37
test_score:  0.996919985426
mape_socre:  0.0166611238217
district_id= 38
test_score:  0.999642870976
mape_socre:  0.490590595856
district_id= 39
test_score:  0.997719851733
mape_socre:  0.169915463675
district_id= 40
test_score:  0.994890975864
mape_socre:  0.601741260852
district_id= 41
test_score:  0.998572256917
mape_socre:  0.457035349232
district_id= 42
test_score:  0.987012765877
mape_socre:  0.435553900962
district_id= 43
test_score:  0.997014671926
mape_socre:  0.466291308849
district_id= 44
test_score:  0.999065619265
mape_socre:  0.222128956792
district_id= 45
test_score:  0.997990478387
mape_socre:  0.423638406406
district_id= 46
test_score:  0.999422005234
mape_socre:  0.127589907629
district_id= 47
test_score:  0.999769451882
mape_socre:  0.134243824536
district_id= 48
test_score:  0.996509276677
mape_socre:  0.0136260369839
district_id= 49
test_score:  0.997542406981
mape_socre:  0.395831116923
district_id= 50
test_score:  0.994034869724
mape_socre:  0.312695836173
district_id= 51
test_score:  0.995632600317
mape_socre:  0.00992613801864
district_id= 52
test_score:  0.999941273519
mape_socre:  0.107884749971
district_id= 53
test_score:  0.998365062827
mape_socre:  0.739131622308
district_id= 54
test_score:  0.878150723589
mape_socre:  4.8893857807
district_id= 55
test_score:  0.98178890258
mape_socre:  0.324398946621
district_id= 56
test_score:  0.989295156762
mape_socre:  0.512032119788
district_id= 57
test_score:  0.970967630833
mape_socre:  0.492480078668
district_id= 58
test_score:  0.995595439428
mape_socre:  0.356141874314
district_id= 59
test_score:  0.99890262093
mape_socre:  0.250763289806
district_id= 60
test_score:  0.98727991066
mape_socre:  0.354881924855
district_id= 61
test_score:  0.998301927295
mape_socre:  0.136814819049
district_id= 62
test_score:  0.997827279496
mape_socre:  0.122140174675
district_id= 63
test_score:  0.99999989517
mape_socre:  0.0149726359291
district_id= 64
test_score:  0.996376409423
mape_socre:  0.1966830112
district_id= 65
test_score:  0.990489856184
mape_socre:  0.371145680823
district_id= 66
test_score:  0.981843630503
mape_socre:  0.320893862807
test_score mean: 0.992714683913
mape mean: 0.365778590315
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   3.277618  
1   13.666667      2.0          2.0  51.0     0   4.287503  
2    2.666667      2.0          2.0  51.0     0   3.259400  
3   30.000000      2.0          2.0  51.0     0  10.816218  
4    2.000000      2.0          2.0  51.0     0   4.279236  
5   27.000000      2.0          2.0  51.0     0   4.198242  
6   45.333333      2.0          2.0  51.0     0   4.931207  
7   96.666667      2.0          2.0  51.0     0   2.915284  
8   27.666667      2.0          2.0  51.0     0   3.815568  
9    0.666667      2.0          2.0  51.0     0   4.239344  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
test_score:  0.905015007909
mape_socre:  9.7611710085
district_id= 2
test_score:  0.822762415897
mape_socre:  16.4096768175
district_id= 3
test_score:  0.842549440238
mape_socre:  19.2814809122
district_id= 4
test_score:  0.959170312115
mape_socre:  16.8735808614
district_id= 5
test_score:  0.862705643604
mape_socre:  18.0433525911
district_id= 6
test_score:  0.950748307052
mape_socre:  16.8140530493
district_id= 7
test_score:  0.939928940183
mape_socre:  7.31769102703
district_id= 8
test_score:  0.961213947882
mape_socre:  6.35496612789
district_id= 9
test_score:  0.887378932562
mape_socre:  21.5293517727
district_id= 10
test_score:  0.878319938519
mape_socre:  21.5470161933
district_id= 11
test_score:  0.879379661398
mape_socre:  19.5322482728
district_id= 12
test_score:  0.886528885198
mape_socre:  13.680474814
district_id= 13
test_score:  0.843620858274
mape_socre:  18.0922549889
district_id= 14
test_score:  0.962166401616
mape_socre:  14.3074395464
district_id= 15
test_score:  0.852022642339
mape_socre:  14.5934763707
district_id= 16
test_score:  0.932899736313
mape_socre:  17.2318336519
district_id= 17
test_score:  0.827362795582
mape_socre:  14.5030177337
district_id= 18
test_score:  0.85695039684
mape_socre:  20.9541036408
district_id= 19
test_score:  0.922064041844
mape_socre:  19.6920789945
district_id= 20
test_score:  0.926475099305
mape_socre:  16.7632225856
district_id= 21
test_score:  0.868201364159
mape_socre:  16.0542551559
district_id= 22
test_score:  0.924456143321
mape_socre:  6.83993324879
district_id= 23
test_score:  0.951619120546
mape_socre:  1.6317285767
district_id= 24
test_score:  0.962134026414
mape_socre:  14.5701444783
district_id= 25
test_score:  0.928905695115
mape_socre:  20.8161500611
district_id= 26
test_score:  0.897617883673
mape_socre:  25.3921619895
district_id= 27
test_score:  0.916616042575
mape_socre:  7.60744076834
district_id= 28
test_score:  0.954651886759
mape_socre:  9.5503547259
district_id= 29
test_score:  0.914791610213
mape_socre:  19.4360851556
district_id= 30
test_score:  0.819284690858
mape_socre:  17.3864601683
district_id= 31
test_score:  0.859365548044
mape_socre:  21.0137077679
district_id= 32
test_score:  0.819882302182
mape_socre:  19.3709281017
district_id= 33
test_score:  0.851568293055
mape_socre:  17.0210764519
district_id= 34
test_score:  0.87474888405
mape_socre:  23.13210933
district_id= 35
test_score:  0.87463590041
mape_socre:  21.162707025
district_id= 36
test_score:  0.887295414139
mape_socre:  18.7906608597
district_id= 37
test_score:  0.967607828901
mape_socre:  10.516222572
district_id= 38
test_score:  0.916214063152
mape_socre:  19.5032893242
district_id= 39
test_score:  0.923093232162
mape_socre:  20.3451051652
district_id= 40
test_score:  0.872268478941
mape_socre:  18.9936810163
district_id= 41
test_score:  0.864955495218
mape_socre:  20.9572833803
district_id= 42
test_score:  0.908544498067
mape_socre:  15.4345890315
district_id= 43
test_score:  0.867954874879
mape_socre:  21.8602927101
district_id= 44
test_score:  0.816161695628
mape_socre:  19.3183423764
district_id= 45
test_score:  0.858646169469
mape_socre:  18.5134260913
district_id= 46
test_score:  0.967328427533
mape_socre:  11.5352460049
district_id= 47
test_score:  0.890764822876
mape_socre:  21.9530600353
district_id= 48
test_score:  0.945676497799
mape_socre:  6.36972400645
district_id= 49
test_score:  0.841118208998
mape_socre:  20.2756236828
district_id= 50
test_score:  0.826126015304
mape_socre:  17.348874387
district_id= 51
test_score:  0.966204422029
mape_socre:  0.890306449555
district_id= 52
test_score:  0.797080444222
mape_socre:  18.3323470613
district_id= 53
test_score:  0.939285538513
mape_socre:  22.3633318931
district_id= 54
test_score:  0.655251423787
mape_socre:  18.5792593396
district_id= 55
test_score:  0.816566519432
mape_socre:  10.0436892218
district_id= 56
test_score:  0.82834416807
mape_socre:  20.5092026057
district_id= 57
test_score:  0.793672154262
mape_socre:  14.3312533317
district_id= 58
test_score:  0.861408362518
mape_socre:  17.6114040391
district_id= 59
test_score:  0.871439803912
mape_socre:  17.4169970962
district_id= 60
test_score:  0.808232864764
mape_socre:  17.932418959
district_id= 61
test_score:  0.82023042333
mape_socre:  15.188925809
district_id= 62
test_score:  0.822618119316
mape_socre:  17.1484184478
district_id= 63
test_score:  0.814469020684
mape_socre:  15.3833216835
district_id= 64
test_score:  0.82876209638
mape_socre:  13.5512415949
district_id= 65
test_score:  0.813527104515
mape_socre:  13.7373697165
district_id= 66
test_score:  0.814555561285
mape_socre:  11.3097626456
test_score mean: 0.877623432517
mape mean: 16.2168546137
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   8.825979  
1   13.666667      2.0          2.0  51.0     0  36.871091  
2    2.666667      2.0          2.0  51.0     0   9.106455  
3   30.000000      2.0          2.0  51.0     0  37.926046  
4    2.000000      2.0          2.0  51.0     0  35.898314  
5   27.000000      2.0          2.0  51.0     0  36.091354  
6   45.333333      2.0          2.0  51.0     0   9.567262  
7   96.666667      2.0          2.0  51.0     0   8.668896  
8   27.666667      2.0          2.0  51.0     0   9.127177  
9    0.666667      2.0          2.0  51.0     0  34.968118  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
gs_cv 1 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 1.74429020592
district_id= 2
gs_cv 2 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.694370616464
district_id= 3
gs_cv 3 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.599329731893
district_id= 4
gs_cv 4 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.923901864719
district_id= 5
gs_cv 5 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.718380390504
district_id= 6
gs_cv 6 最优参数: {'max_features': 1.0, 'learning_rate': 0.1, 'max_depth': 10}
holdout mean: 1.46186486134
district_id= 7
gs_cv 7 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 1.77633924995
district_id= 8
gs_cv 8 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 1.47845527106
district_id= 9
gs_cv 9 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 1.11908443972
district_id= 10
gs_cv 10 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.984448438466
district_id= 11
gs_cv 11 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 6}
holdout mean: 0.634803740618
district_id= 12
gs_cv 12 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 8}
holdout mean: 0.555100358447
district_id= 13
gs_cv 13 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.761609795433
district_id= 14
gs_cv 14 最优参数: {'max_features': 0.5, 'learning_rate': 0.1, 'max_depth': 8}
holdout mean: 2.24760186916
district_id= 15
gs_cv 15 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.581896551724
district_id= 16
gs_cv 16 最优参数: {'max_features': 1.0, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.706855289413
district_id= 17
gs_cv 17 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.565598050244
district_id= 18
gs_cv 18 最优参数: {'max_features': 0.1, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 0.780650916697
district_id= 19
gs_cv 19 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.924961429613
district_id= 20
gs_cv 20 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 1.57500819689
district_id= 21
gs_cv 21 最优参数: {'max_features': 1.0, 'learning_rate': 0.1, 'max_depth': 8}
holdout mean: 2.50545655894
district_id= 22
gs_cv 22 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.386744156134
district_id= 23
gs_cv 23 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 8}
holdout mean: 1.10128735811
district_id= 24
gs_cv 24 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.983727019627
district_id= 25
gs_cv 25 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.818537727889
district_id= 26
gs_cv 26 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 2.21611846451
district_id= 27
gs_cv 27 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.458377031459
district_id= 28
gs_cv 28 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 8}
holdout mean: 3.41825593712
district_id= 29
gs_cv 29 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.869758283212
district_id= 30
gs_cv 30 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.734365203762
district_id= 31
gs_cv 31 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.789753800887
district_id= 32
gs_cv 32 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.790902051878
district_id= 33
gs_cv 33 最优参数: {'max_features': 0.1, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 0.592673519418
district_id= 34
gs_cv 34 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.950899887514
district_id= 35
gs_cv 35 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 1.17638019176
district_id= 36
gs_cv 36 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.990548075615
district_id= 37
gs_cv 37 最优参数: {'max_features': 1.0, 'learning_rate': 0.01, 'max_depth': 6}
holdout mean: 1.77376271816
district_id= 38
gs_cv 38 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.843205308903
district_id= 39
gs_cv 39 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 1.23916000885
district_id= 40
gs_cv 40 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.848866213152
district_id= 41
gs_cv 41 最优参数: {'max_features': 0.1, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 0.711558101674
district_id= 42
gs_cv 42 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 8}
holdout mean: 1.42761246477
district_id= 43
gs_cv 43 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.581944444444
district_id= 44
gs_cv 44 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.661050724638
district_id= 45
gs_cv 45 最优参数: {'max_features': 1.0, 'learning_rate': 0.1, 'max_depth': 10}
holdout mean: 0.837681962482
district_id= 46
gs_cv 46 最优参数: {'max_features': 1.0, 'learning_rate': 0.1, 'max_depth': 10}
holdout mean: 1.9631527927
district_id= 47
gs_cv 47 最优参数: {'max_features': 0.1, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 0.703993974941
district_id= 48
gs_cv 48 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 1.64558130228
district_id= 49
gs_cv 49 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.746818727491
district_id= 50
gs_cv 50 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.517156862745
district_id= 51
gs_cv 51 最优参数: {'max_features': 0.1, 'learning_rate': 0.1, 'max_depth': 6}
holdout mean: 5.50975424654
district_id= 52
gs_cv 52 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.566472868217
district_id= 53
gs_cv 53 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.982308767215
district_id= 54
gs_cv 54 最优参数: {'max_features': 0.1, 'learning_rate': 0.1, 'max_depth': 10}
holdout mean: 0.592894056848
district_id= 55
gs_cv 55 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.305445544554
district_id= 56
gs_cv 56 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.745568227291
district_id= 57
gs_cv 57 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.705167958656
district_id= 58
gs_cv 58 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.723073945025
district_id= 59
gs_cv 59 最优参数: {'max_features': 1.0, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 0.643534482759
district_id= 60
gs_cv 60 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.597286821705
district_id= 61
gs_cv 61 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.54652173913
district_id= 62
gs_cv 62 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.413263588264
district_id= 63
gs_cv 63 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.635325558795
district_id= 64
gs_cv 64 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 10}
holdout mean: 0.565245478036
district_id= 65
gs_cv 65 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.496818555008
district_id= 66
gs_cv 66 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 0.37015503876
mape mean: 0.0
ts mean: 0.0
holdout mean: 1.0381624094
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   4.032783  
1   13.666667      2.0          2.0  51.0     0  14.493408  
2    2.666667      2.0          2.0  51.0     0   9.876143  
3   30.000000      2.0          2.0  51.0     0   5.607800  
4    2.000000      2.0          2.0  51.0     0   6.194037  
5   27.000000      2.0          2.0  51.0     0   7.413466  
6   45.333333      2.0          2.0  51.0     0   7.816719  
7   96.666667      2.0          2.0  51.0     0  10.076916  
8   27.666667      2.0          2.0  51.0     0   5.095382  
9    0.666667      2.0          2.0  51.0     0  19.778003  
final_result.shape (2838, 11)
good_df.shape (2838, 10)
district_id= 1
gs_cv 1 最优参数: {'max_features': 0.5, 'learning_rate': 0.01, 'max_depth': 30}
holdout mean: 0.941628483489
district_id= 2
gs_cv 2 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.542746400886
district_id= 3
gs_cv 3 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.579731892757
district_id= 4
gs_cv 4 最优参数: {'max_features': 0.7, 'learning_rate': 0.1, 'max_depth': 20}
holdout mean: 0.896731114735
district_id= 5
gs_cv 5 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.711901250176
district_id= 6
gs_cv 6 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 1.27578313088
district_id= 7
gs_cv 7 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 1.73679153614
district_id= 8
gs_cv 8 最优参数: {'max_features': 0.3, 'learning_rate': 0.05, 'max_depth': 10}
holdout mean: 1.63279601294
district_id= 9
gs_cv 9 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.790108291917
district_id= 10
gs_cv 10 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.830132962276
district_id= 11
gs_cv 11 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.806444567491
district_id= 12
gs_cv 12 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 0.611376995671
district_id= 13
gs_cv 13 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 0.605218246566
district_id= 14
gs_cv 14 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 8}
holdout mean: 1.86383970012
district_id= 15
gs_cv 15 最优参数: {'max_features': 0.3, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.478448275862
district_id= 16
gs_cv 16 最优参数: {'max_features': 0.7, 'learning_rate': 0.05, 'max_depth': 30}
holdout mean: 0.571602794277
district_id= 17
gs_cv 17 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.49191976003
district_id= 18
gs_cv 18 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.652937738403
district_id= 19
gs_cv 19 最优参数: {'max_features': 0.7, 'learning_rate': 0.05, 'max_depth': 14}
holdout mean: 0.791218966219
district_id= 20
gs_cv 20 最优参数: {'max_features': 1.0, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.830054632935
district_id= 21
gs_cv 21 最优参数: {'max_features': 0.7, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 1.33248682842
district_id= 22
gs_cv 22 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.386582243828
district_id= 23
gs_cv 23 最优参数: {'max_features': 0.3, 'learning_rate': 0.1, 'max_depth': 8}
holdout mean: 1.10621809421
district_id= 24
gs_cv 24 最优参数: {'max_features': 0.7, 'learning_rate': 0.05, 'max_depth': 14}
holdout mean: 1.09254184243
district_id= 25
gs_cv 25 最优参数: {'max_features': 0.7, 'learning_rate': 0.1, 'max_depth': 30}
holdout mean: 0.671454571221
district_id= 26
gs_cv 26 最优参数: {'max_features': 0.5, 'learning_rate': 0.05, 'max_depth': 40}
holdout mean: 1.84209770562
district_id= 27
gs_cv 27 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.433601968776
district_id= 28
gs_cv 28 最优参数: {'max_features': 1.0, 'learning_rate': 0.01, 'max_depth': 14}
holdout mean: 1.14774726231
district_id= 29
gs_cv 29 最优参数: {'max_features': 0.3, 'learning_rate': 0.05, 'max_depth': 20}
holdout mean: 0.781680133972
district_id= 30
gs_cv 30 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.637957157785
district_id= 31
gs_cv 31 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.664109328172
district_id= 32
gs_cv 32 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.629248935346
district_id= 33
gs_cv 33 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.532596000038
district_id= 34
gs_cv 34 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 0.853918260217
district_id= 35
gs_cv 35 最优参数: {'max_features': 0.3, 'learning_rate': 0.01, 'max_depth': 30}
holdout mean: 0.855500063563
district_id= 36
gs_cv 36 最优参数: {'max_features': 0.3, 'learning_rate': 0.1, 'max_depth': 40}
holdout mean: 0.822201822385
district_id= 37
gs_cv 37 最优参数: {'max_features': 0.7, 'learning_rate': 0.01, 'max_depth': 8}
holdout mean: 1.21066546877
district_id= 38
gs_cv 38 最优参数: {'max_features': 0.3, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.789807543877
district_id= 39
gs_cv 39 最优参数: {'max_features': 0.3, 'learning_rate': 0.01, 'max_depth': 30}
holdout mean: 0.913450722506
district_id= 40
gs_cv 40 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.670842781557
district_id= 41
gs_cv 41 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 0.661662691314
district_id= 42
gs_cv 42 最优参数: {'max_features': 0.5, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.903899358474
district_id= 43
gs_cv 43 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.557352941176
district_id= 44
gs_cv 44 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.611322463768
district_id= 45
gs_cv 45 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.533681962482
district_id= 46
gs_cv 46 最优参数: {'max_features': 0.7, 'learning_rate': 0.05, 'max_depth': 14}
holdout mean: 1.29718363068
district_id= 47
gs_cv 47 最优参数: {'max_features': 0.1, 'learning_rate': 0.1, 'max_depth': 40}
holdout mean: 0.697160095946
district_id= 48
gs_cv 48 最优参数: {'max_features': 0.3, 'learning_rate': 0.05, 'max_depth': 40}
holdout mean: 1.39591221656
district_id= 49
gs_cv 49 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.670268107243
district_id= 50
gs_cv 50 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.502450980392
district_id= 51
gs_cv 51 最优参数: {'max_features': 0.3, 'learning_rate': 0.01, 'max_depth': 10}
holdout mean: 4.6848303534
district_id= 52
gs_cv 52 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.397868217054
district_id= 53
gs_cv 53 最优参数: {'max_features': 0.7, 'learning_rate': 0.1, 'max_depth': 14}
holdout mean: 0.875571711732
district_id= 54
gs_cv 54 最优参数: {'max_features': 0.3, 'learning_rate': 0.1, 'max_depth': 20}
holdout mean: 0.49173126615
district_id= 55
gs_cv 55 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.184570957096
district_id= 56
gs_cv 56 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.635554221689
district_id= 57
gs_cv 57 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.474547803618
district_id= 58
gs_cv 58 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 20}
holdout mean: 0.67564847077
district_id= 59
gs_cv 59 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 30}
holdout mean: 0.715301724138
district_id= 60
gs_cv 60 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 30}
holdout mean: 0.617635658915
district_id= 61
gs_cv 61 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.409855072464
district_id= 62
gs_cv 62 最优参数: {'max_features': 0.1, 'learning_rate': 0.02, 'max_depth': 20}
holdout mean: 0.395586820587
district_id= 63
gs_cv 63 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 30}
holdout mean: 0.609815354713
district_id= 64
gs_cv 64 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.418604651163
district_id= 65
gs_cv 65 最优参数: {'max_features': 0.3, 'learning_rate': 0.02, 'max_depth': 40}
holdout mean: 0.50184729064
district_id= 66
gs_cv 66 最优参数: {'max_features': 0.1, 'learning_rate': 0.01, 'max_depth': 40}
holdout mean: 0.204780361757
mape mean: 0.0
ts mean: 0.0
holdout mean: 0.835466149586
len(predictions) 2838
len(predict_df) 2838
final_result    district_id           time   tj_level_1  tj_level_2  tj_level_3  \
0            1  2016-01-22-46  1461.000000  259.000000  102.000000   
1            2  2016-01-22-46   651.666667   78.000000   20.000000   
2            3  2016-01-22-46   188.333333   26.333333    5.333333   
3            4  2016-01-22-46   652.000000  127.333333   33.666667   
4            5  2016-01-22-46    97.000000   10.666667    3.000000   
5            6  2016-01-22-46   321.000000   58.666667   26.333333   
6            7  2016-01-22-46  1763.333333  247.333333   70.000000   
7            8  2016-01-22-46  2638.666667  316.000000  114.000000   
8            9  2016-01-22-46   504.666667   68.333333   19.000000   
9           10  2016-01-22-46   146.333333   15.333333    4.000000   

   tj_level_4  weather  temperature  pm25  week        gap  
0   67.333333      2.0          2.0  51.0     0   5.078915  
1   13.666667      2.0          2.0  51.0     0  13.604844  
2    2.666667      2.0          2.0  51.0     0   8.568166  
3   30.000000      2.0          2.0  51.0     0   4.727567  
4    2.000000      2.0          2.0  51.0     0   5.492634  
5   27.000000      2.0          2.0  51.0     0   6.807060  
6   45.333333      2.0          2.0  51.0     0   6.713779  
7   96.666667      2.0          2.0  51.0     0   7.853839  
8   27.666667      2.0          2.0  51.0     0   4.070637  
9    0.666667      2.0          2.0  51.0     0   6.628512  
final_result.shape (2838, 11)
